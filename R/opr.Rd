\name{opr}
\alias{opr}
\title{
The outer products ratio richness estimator
}
\description{
Estimates richness using a ratio of outer products of species counts.
}
\usage{
opr(n)
}
\arguments{
  \item{n}{
A vector of integer counts representing the number of individuals per species.
}
}
\details{
This function implements a richness estimator based on comparing outer product matrices that are derived from a single species count vector. It only returns the richness estimate.

The basic idea is to assume that sampling completeness tracks the ratio (\emph{n} \%o\% (\emph{n} - 1))^0.5/(\emph{n} \%o\% \emph{n})^0.5 where \emph{n} is the list of counts and the outer product matrix is \emph{n} \%o\% \emph{n}. The ratio is low when sampling is poor. The estimator is therefore raw richness \emph{S} divided by the mean ratio:

\code{
length(n) / mean((n \%o\% (n - 1))^0.5 / (n \%o\% n)^0.5)
}

The index bears a structural relationship to the geometric series index (\link{gsindex}):

\code{
length(n) / mean((n - 1) / n)
}

The geometric series index assumes a compound uniform-geometric distribution: each count is yielded by a geometric process with its own randomly generated governing parameter \emph{p} being drawn from the uniform distribution. The outer product ratio very closely tracks richness estimates drawn from the compound exponential-geometric series distribution (see \link{cegsML}), suggesting that is assumes the data are generated by this model. However, the index has very low sampling variance and is highly insensitive to the comings and goings of individual high counts, unlike CEGS estimates derived using any inference criterion.

}
\author{
John Alroy
}
\examples{
# CEGS distribution
n <- rcegs(100)
opr(n[n > 0])

# Poisson log normal distribution
n <- rpois(100,exp(rnorm(100,sd=2)))
opr(n[n > 0])

# scaled odds distribution
n <- rodds(100,1)
opr(n[n > 0])
}
